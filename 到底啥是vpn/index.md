# 到底啥是VPN


## 什么是VPN？

* 对于出差的员工，公司的IT部门会在他们的电脑上装上VPN软件。这个VPN软件可以连接到一台由公司内部控制的电脑服务器上，叫“VPN服务器”（VPN Server）。出差员工连上VPN以后，他上网时就不再直接访问公共互联网，而是通过VPN服务器间接访问

  <img src="https://jack-blog-img.obs.cn-north-4.myhuaweicloud.com/github-page/img20201229104837.png" style="zoom:80%;" />

* VPN还有一个**重要特点**：VPN用户和VPN服务器之间的通讯是加密的，这样就不会被黑客盗取内容。这就好比两个人打电话，是有可能被第三方监听的，但是如果打电话的两个人使用的是别人都听不懂的特殊语言（这就是加密），那么即使有人监听，打电话的内容也不会被泄露。

## VPN有什么用：

* VPN可以提高上网的安全性
  * 因为使用VPN时所用的网络访问都是加密进行的，黑客很难截取用户的重要信息。如果使用公共WIFI上网（例如在咖啡馆上网）时，需要做安全性强的操作（比如使用网上银行或网上投资账户），建议连上VPN。

* VPN可以隐藏上网者的身份
  * 因为VPN用户访问任何网站都是通过VPN服务器间接访问的，所以被访问的网站看到的访问者是VPN服务器，而不是VPN用户本人的电脑。

* VPN可以突破网站的地域限制
  * 很多网站通过查看访问者的IP地址属于哪个国家来选择展示不同的服务内容。而VPN可以用来突破这种IP限制。

* 突破网络封锁
  * VPN用户访问任何网站都是通过VPN服务器代为访问的，用户连接的其实是VPN服务器，然后VPN服务器去连接限制网站，把限制网站的内容回传给你。同时VPN传输是加密的，网络监控也无法破解你和VPN服务器之间在传输什么信息，网络监控就不会切断你的连接。


## 理解1.0
* 离开学校会发现没法访问校园网了，我原来认为是校园局域网，然后在家里用VPN通过内网穿透来访问，但是在家里能通过学校的VPN服务器连接校园网进行访问。所以我现在觉得校园网只是出于安全考虑根据你的网络ip地址设置的防火墙。只能通过校园网或者学校的VPN专用服务器进行VPN正向代理访问。不过从目的来看好像确实穿透了内网
* <img src="https://jack-blog-img.obs.cn-north-4.myhuaweicloud.com/github-page/img20201229122754.png" style="zoom: 67%;" />

## 理解2.0
* 关于校园网VPN，我的最新理解：在用户端使用VPN功能的软件，配置为隧道开通器，通过ISP接入Internet并访问校园网内的VPN服务器。到这一步和一般的正向代理都没有差别，让外部机器和VPN正向代理服务器处于了同一局域网。不同的地方在于，这个VPN服务器本身就位于服务终端的内部局域网中，所以此时所有主机（外部访问终端，内部服务终端，VPN服务器）都在一个虚拟的大局域网中了。

## 理解3.0
* 目前为止，GFW（Great Fire Wall）采用的是黑名单模式，像Google、Facebook这种在黑名单上的网站的ip无法访问，而不在黑名单上的第三方不记名ip可以。目前几乎所有的翻墙手段都是基于该原理（在第三方架设翻墙服务器，中转与目标服务器间的来往流量）实现的，vpn是，shadowsocks是，还有一些比较冷门的（比如v2ray）同样如此，只不过它们的技术细节不同
* vpn出现远早于GFW，vpn不是为了翻墙而生的，而是一种加密通讯技术
  * 通常使用专用协议(如PPTP、L2TP、IPSec和openvpn等)在客户端与VPN服务器之间建立连接,这些协议具有较为固定的报文格式,易于被识别和屏蔽
* 正向代理Proxy的历史同样早于GFW，它最早被设计出来的目的当然也不是翻墙。正向代理最主要的目的和vpn差不多，都是用于匿名
  * 采用的协议主要有HTTP、HTTP over TLS(HTTPS)、Socks、Socks over TLS几种。HTTP和Socks无法用于翻墙，HTTPS和Socks over TLS可以用于翻墙
  * HTTP和Socks不能加密，只能匿名，一般只用作本地代理。HTTPS既可以匿名，也可以用于加密通信，GFW无法得知数据包内的真实内容，类似于关键词过滤的手段无法施展。而且HTTPS代理的流量特征和我们平时访问网站时所产生的HTTPS流量几乎一模一样，GFW无法分辨，稳定性爆表。
* Https正向Proxy和VPN都是加密的，有什么区别？
  * HTTPS代理通常只会对通过代理服务器传输的数据进行加密，而不会影响其他应用程序或网络流量。VPN在操作系统级别上工作，加密和保护整个设备的网络连接，包括浏览器、电子邮件客户端、文件传输等


